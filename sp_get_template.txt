SELECT t.TemplateID, TemplateTitle, TemplateDescription,
PreviewImage, t.TemplateCategoryID,
CASE WHEN TemplateRatingID is not null then
(SUM(Rating)/COUNT(TemplateRatingID))
ELSE 0 END 'Rating',
SUM(Rating),
COUNT(TemplateRatingID)
, TemplateCreatedDate FROM Template t
JOIN TemplateCategory tc on t.TemplateCategoryID=tc.TemplateCategoryID
LEFT JOIN TemplateRating tr on t.TemplateID=tr.TemplateID
GROUP BY TemplateID, TemplateTitle, TemplateDescription,
PreviewImage,TemplateCreatedDate